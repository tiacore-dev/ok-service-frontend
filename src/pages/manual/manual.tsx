import * as React from "react";
import { Typography, Anchor } from "antd";
import users from "./img/users.png";
import home from "./img/home.png";
import importProjectWorks from "./img/importProjectWorks.png";
import object from "./img/object.png";
import objects from "./img/objects.png";
import project from "./img/project.png";
import shiftReportDesktop from "./img/shiftReportDesktop.png";
import shiftReportMobile from "./img/shiftReportMobile.png";
import work from "./img/work.png";
import works from "./img/works.png";

const { Title, Paragraph, Text } = Typography;
import "./manual.less";

export const Manual: React.FC = () => {
  return (
    <div className="manual">
      <div className="manual_contents">
        <Anchor
          items={[
            { key: "intro", href: "#intro", title: "О приложении" },
            { key: "roles", href: "#roles", title: "Роли" },
            { key: "users", href: "#users", title: "Пользователи" },
            { key: "objects", href: "#objects", title: "Объекты" },
            { key: "spec", href: "#spec", title: "Спецификация" },
            {
              key: "shift-report",
              href: "#shift-report",
              title: "Отчет по смене",
            },
            { key: "catalog", href: "#catalog", title: "Каталог работ" },
            { key: "dashboard", href: "#dashboard", title: "Главная страница" },
          ]}
        />
      </div>

      {/* Основной контент */}
      <div style={{ flex: 1, minWidth: 0 }}>
        <Typography>
          {/* Введение */}
          <Title id="intro" level={2}>
            Приложение Firecorp Vision
          </Title>

          <Paragraph>
            Приложение используется для учёта выполненных работ по монтажу
            оборудования. Все основные действия — создание спецификаций, ведение
            отчётов по сменам, расчёт вознаграждения монтажников — выполняются в
            едином интерфейсе.
          </Paragraph>

          <Paragraph>
            Все разделы приложения доступны как при работе на&nbsp;ПК, так и в
            мобильной версии браузера.
          </Paragraph>

          <Paragraph>
            В приложении реализован ролевой доступ. Права пользователя зависят
            от его роли, которая задаётся при создании учётной записи.
          </Paragraph>

          {/* Роли */}
          <Title id="roles" level={3}>
            Роли
          </Title>

          <Paragraph>В системе предусмотрено четыре основных роли:</Paragraph>

          <Paragraph>
            <Text strong>Пользователь</Text> имеет права на:
          </Paragraph>
          <ul>
            <li>создание отчёта по смене;</li>
            <li>просмотр собственных отчётов по смене.</li>
          </ul>

          <Paragraph>
            <Text strong>Прораб</Text> имеет права на:
          </Paragraph>
          <ul>
            <li>создание отчётов по смене от имени других пользователей;</li>
            <li>утверждение отчётов по смене;</li>
            <li>редактирование и удаление отчётов по смене;</li>
            <li>добавление записей в спецификацию без флага «Согласовано».</li>
          </ul>
          <Paragraph type="secondary">
            * Прораб может выполнять действия только в рамках спецификаций, по
            которым он назначен ответственным.
          </Paragraph>

          <Paragraph>
            <Text strong>Менеджер</Text> имеет права на:
          </Paragraph>
          <ul>
            <li>создание, редактирование и удаление объектов;</li>
            <li>
              создание, редактирование, удаление и согласование спецификаций, а
              также назначение ответственного прораба.
            </li>
          </ul>
          <Paragraph type="secondary">
            * Менеджер выполняет действия только в рамках объектов, по которым
            он является ответственным.
          </Paragraph>

          <Paragraph>
            <Text strong>Администратор</Text> имеет права на:
          </Paragraph>
          <ul>
            <li>создание, редактирование и удаление пользователей;</li>
            <li>
              создание, редактирование и удаление цен и видов работ в разделе
              «Каталог работ».
            </li>
          </ul>

          {/* Пользователи */}
          <Title id="users" level={3}>
            Пользователи
          </Title>

          <Paragraph>
            Пользователи создаются, просматриваются, редактируются и удаляются в
            разделе меню <Text strong>«Пользователи»</Text>. Управление
            пользователями доступно только Администратору.
          </Paragraph>

          <Paragraph>
            Для каждого пользователя может быть указан{" "}
            <Text strong>«Разряд»</Text>. Разряд влияет на расчёт вознаграждения
            за работы, указанные в отчёте по смене, в соответствии с ценами в
            разделе <Text strong>«Каталог работ»</Text>.
          </Paragraph>

          <div style={{ margin: "16px 0" }}>
            <img
              src={users}
              alt="Список пользователей"
              className="manual_img"
            />
          </div>

          <Paragraph>Чтобы создать нового пользователя:</Paragraph>
          <ul>
            <li>
              нажмите кнопку <Text code>«Создать»</Text>;
            </li>
            <li>заполните Имя (ФИО), логин и пароль;</li>
            <li>при необходимости укажите разряд;</li>
            <li>выберите роль пользователя.</li>
          </ul>

          <Paragraph>
            При создании или редактировании пользователя можно задать пароль для
            входа в приложение. Просмотреть пароль после сохранения невозможно —
            он хранится в зашифрованном виде.
          </Paragraph>

          <Paragraph type="secondary">
            Управление пользователями (создание, редактирование, блокировка и
            т.д.) доступно только Администратору системы.
          </Paragraph>

          {/* Объекты */}
          <Title id="objects" level={3}>
            Объекты
          </Title>

          <Paragraph>
            Все спецификации и отчёты по сменам привязаны к{" "}
            <Text strong>объектам</Text>. Без объекта нельзя создать
            спецификацию или отчёт по смене. Объекты создаются, редактируются и
            удаляются Менеджером в разделе <Text strong>«Объекты»</Text>.
          </Paragraph>
          <div style={{ margin: "16px 0" }}>
            <img src={objects} alt="Список объекта" className="manual_img" />
          </div>
          <Paragraph>Объект содержит следующие данные:</Paragraph>
          <ul>
            <li>Наименование;</li>
            <li>Адрес;</li>
            <li>Описание;</li>
            <li>Ответственный менеджер;</li>
            <li>Статус (например, «Действующий», «Завершён» и т.п.).</li>
          </ul>

          <Paragraph>
            Создание пользователями отчётов по смене возможно только по объектам
            со статусом <Text strong>«Действующий»</Text>.
          </Paragraph>

          <div style={{ margin: "16px 0" }}>
            <img src={object} alt="Карточка объекта" className="manual_img" />
          </div>

          <Paragraph>В карточке объекта можно:</Paragraph>
          <ul>
            <li>просмотреть список спецификаций, связанных с объектом;</li>
            <li>добавить новую спецификацию.</li>
          </ul>

          {/* Спецификация */}
          <Title id="spec" level={3}>
            Спецификация
          </Title>

          <Paragraph>
            Спецификация — это список работ, выполняемых по договору на
            конкретном объекте. По этой спецификации затем создаются отчёты по
            сменам.
          </Paragraph>

          <Paragraph>Для каждой записи в спецификации указываются:</Paragraph>
          <ul>
            <li>
              <Text strong>«Наименование»</Text> — обычно подробное название
              выполняемой работы или наименование оборудования в соответствии с
              договором;
            </li>
            <li>
              <Text strong>«Работа»</Text> — значение, выбранное из{" "}
              <Text strong>Каталога работ</Text>. От выбранной работы зависит
              размер вознаграждения в отчёте по смене с учётом разряда
              пользователя;
            </li>
            <li>
              <Text strong>«Количество»</Text> — плановое количество работ по
              спецификации. Это значение ограничивает возможность согласования
              отчётов по сменам при превышении указанного объёма;
            </li>
            <li>
              <Text strong>«Согласовано»</Text> — флаг, устанавливаемый
              Менеджером и означающий, что данная позиция спецификации прошла
              все необходимые процедуры согласования.
            </li>
          </ul>

          <Paragraph>
            Пример: в спецификации указано «Изолятор шлейфа ИЗ», количество 14.
            Если по этой спецификации будут созданы три отчёта по смене, в
            каждом из которых указано по 5 штук, то при попытке согласовать
            третий отчёт система не позволит это сделать, так как общее
            количество 3 × 5 = 15 превышает плановое количество 14.
          </Paragraph>

          <Paragraph type="secondary">
            Флаг «Согласовано» при создании спецификации менеджером обычно
            устанавливается сразу. Если прораб по производственной необходимости
            добавляет новые работы в спецификацию, такие записи появляются без
            флага «Согласовано» и требуют отдельного согласования менеджером.
          </Paragraph>

          <div style={{ margin: "16px 0" }}>
            <img
              src={project}
              alt="Спецификация объекта"
              className="manual_img"
            />
          </div>

          <Paragraph>
            Для удобства предусмотрена загрузка спецификации из Excel:
          </Paragraph>
          <ul>
            <li>
              на странице редактирования спецификации нажмите кнопку{" "}
              <Text strong>«Загрузить»</Text>;
            </li>
            <li>
              в левое окно вставьте данные, скопированные из Excel (в первом
              столбце — наименование работ, во втором — количество);
            </li>
            <li>
              справа будет показана таблица с распознанными данными
              (наименование, количество и выбранная работа из каталога).
            </li>
          </ul>

          <Paragraph>
            При нажатии кнопки{" "}
            <Text strong>«Анализировать наименование работ»</Text> система
            пытается автоматически подобрать работу из каталога. Если в
            наименовании содержится название работы из каталога, соответствующая
            работа будет выбрана автоматически. В противном случае её можно
            выбрать вручную.
          </Paragraph>
          <div style={{ margin: "16px 0" }}>
            <img
              src={importProjectWorks}
              alt="Спецификация объекта"
              className="manual_img"
            />
          </div>
          <Paragraph>
            Запись может быть загружена в спецификацию только при заполнении
            всех необходимых полей. Сохранение происходит при нажатии кнопки
            <Text strong> «Загрузить»</Text>; на кнопке отображается количество
            записей, которое будет сохранено.
          </Paragraph>

          {/* Отчет по смене */}
          <Title id="shift-report" level={3}>
            Отчёт по смене
          </Title>

          <Paragraph>
            Отчёт по смене фиксирует работы, выполненные пользователем за
            конкретную смену, и служит основанием для расчёта вознаграждения.
          </Paragraph>

          <Paragraph>При создании отчёта по смене указываются:</Paragraph>
          <ul>
            <li>
              <Text strong>Дата</Text> смены;
            </li>
            <li>
              <Text strong>Объект</Text> — выбирается только из списка
              действующих объектов;
            </li>
            <li>
              <Text strong>Спецификация</Text> — выбирается среди спецификаций
              выбранного объекта;
            </li>
            <li>
              необязательные флаги <Text strong>«Ночная смена»</Text> и{" "}
              <Text strong>«Особые условия»</Text>, каждый из которых
              увеличивает стоимость смены на 25%.
            </li>
          </ul>

          <Paragraph>
            При создании отчёта пользователем он попадает в статус{" "}
            <Text strong>«Не согласовано»</Text>. После создания отчёт
            открывается в режиме редактирования, где пользователь добавляет
            записи о выполненных работах.
          </Paragraph>

          <Paragraph>
            Для каждой записи в отчёте указываются наименование работы из
            спецификации и количество. Система автоматически рассчитывает сумму
            вознаграждения по каждой записи и по отчёту в целом, используя
            данные каталога работ и разряд пользователя.
          </Paragraph>

          <Paragraph>
            Отчёт по смене может быть изменён или удалён пользователем до
            момента его согласования прорабом. После согласования отчёта работы
            считаются выполненными, а вознаграждение — начисленным.
          </Paragraph>

          <div style={{ margin: "16px 0" }}>
            <img
              src={shiftReportMobile}
              alt="Отчет по смене"
              className="manual_img"
            />
          </div>

          <Paragraph>
            Согласование отчёта выполняет прораб, ответственный за выбранную в
            отчёте спецификацию. При согласовании он проверяет все данные.
            Система дополнительно:
          </Paragraph>
          <ul>
            <li>
              показывает плановое количество работ по спецификации по каждой
              позиции;
            </li>
            <li>
              учитывает количество этих работ в уже согласованных отчётах;
            </li>
            <li>рассчитывает доступное для согласования количество.</li>
          </ul>

          <Paragraph>
            Если в отчёте указано количество, превышающее доступное,
            согласование смены будет заблокировано.
          </Paragraph>
          <div style={{ margin: "16px 0" }}>
            <img
              src={shiftReportDesktop}
              alt="Отчет по смене"
              className="manual_img"
            />
          </div>

          {/* Каталог работ */}
          <Title id="catalog" level={3}>
            Каталог работ
          </Title>

          <Paragraph>
            Раздел <Text strong>«Каталог работ»</Text> используется для
            управления видами работ и их стоимостью. Именно отсюда берутся цены
            для расчёта вознаграждения пользователей в отчётах по сменам.
          </Paragraph>

          <Paragraph>
            Для каждого вида работ указывается стоимость по каждому разряду
            отдельно. Администратор может:
          </Paragraph>
          <ul>
            <li>создавать новые виды работ;</li>
            <li>редактировать существующие;</li>
            <li>удалять виды работ и цены.</li>
          </ul>

          <div style={{ margin: "16px 0" }}>
            <img src={works} alt="Каталог работ" className="manual_img" />
          </div>

          <Paragraph>
            При удалении цены она не исчезает полностью из каталога, а
            помечается как удалённая (например, иконкой удаления). Это позволяет
            сохранить историю и избежать потери данных.
          </Paragraph>

          <div style={{ margin: "16px 0" }}>
            <img src={work} alt="Цены работ" className="manual_img" />
          </div>

          {/* Главная страница */}
          <Title id="dashboard" level={3}>
            Главная страница
          </Title>

          <Paragraph>
            На главной странице отображаются сводные графики по выполненным
            работам и начисленному вознаграждению за выбранный период.
          </Paragraph>

          <Paragraph>Доступны два варианта периода:</Paragraph>
          <ul>
            <li>последние 10 календарных дней;</li>
            <li>период с последнего 21-го числа до текущего дня.</li>
          </ul>

          <Paragraph>По дням отображаются следующие показатели:</Paragraph>
          <ul>
            <li>
              общий размер вознаграждения (общая стоимость выполненных работ);
            </li>
            <li>количество монтажников, работавших в этот день;</li>
            <li>средняя стоимость смены.</li>
          </ul>

          <div style={{ margin: "16px 0" }}>
            <img src={home} alt="Главная страница" className="manual_img" />
          </div>

          <Paragraph>
            Блок <Text strong>«Стоимость выполненных работ по объектам»</Text>{" "}
            отображает итоговые суммы за все дни выбранного периода.
          </Paragraph>

          <Paragraph>
            При переключении на отображение по сотрудникам графики показывают
            итоговые суммы выполненных работ по каждому пользователю, который
            создавал отчёты по смене в выбранном периоде.
          </Paragraph>
        </Typography>
      </div>
    </div>
  );
};
